<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>06_箭头函数</title>

</head>
<body>
    <button id="btn1">测试箭头函数this_1</button>
    <button id="btn2">测试箭头函数this_2</button>


<!--
* 作用: 定义匿名函数
* 基本语法:
  * 没有参数: () => console.log('xxxx')
  * 一个参数: i => i+2
  * 大于一个参数: (i,j) => i+j
  * 函数体不用大括号: 默认返回结果
  * 函数体如果有多个语句, 需要用{}包围，若有需要返回的内容，需要手动返回
* 使用场景: 多用来定义回调函数

* 箭头函数的特点：
    1、简洁
    2、箭头函数没有自己的this，箭头函数的this不是调用的时候决定的，而是在定义的时候处在的对象就是它的this
    3、扩展理解： 箭头函数的this看外层的是否有函数，
        如果有，外层函数的this就是内部箭头函数的this，
        如果没有，则this是window。
-->
<script type="text/javascript">
  'use strict';

  function fn1() {

  }

  // 箭头函数
  const fn2 = () => {

  }

  // 形参只有一个, 可以省略括号
  const fn3 = x => {

  }
  // 形参没有 或者 有多个(x, y) => {

  }
  const fn4 =

  // 箭头函数体代码：代码只有一条, 可以省略花括号. 会将这条语句的值作为箭头函数的返回值返回
  const fn5 = x => x + 1;

  // const result = fn5(2);
  // console.log(result);

  // 箭头函数体代码：代码没有 或者 有多条
  const fn6 = () => {
    console.log(123);
    console.log(456);
  };

  // const r = fn6();
  // console.log(r);


  /*
    箭头函数特点：
      所有函数都有显示原型属性。除了箭头函数
      所有对象都有隐式原型属性。

      箭头函数不能new调用
   */
  const foo = () => {
    console.log(this);
  };
  // console.log(foo.prototype);  // undefined
  // console.log(foo.__proto__ === fn1.__proto__); // true

  // new foo() // Uncaught TypeError: foo is not a constructor
  foo();

  // 对象的简写方法
  var obj = {
    a: 1,
    foo
  };
  obj.foo();
  foo.apply(obj);

  function foo1() {
    console.log('普通函数foo1', this);
    function foo3() {
      console.log('普通函数foo3', this);
      const foo2 = () => {
        console.log('箭头函数foo2', this);
      };
      foo2();
    }
    foo3();
  }
  foo1();

  var obj1 = {
    a: 2,
    foo1
  };
  obj1.foo1();

  /*
    箭头函数的this与离他最近，包裹着它的函数的this指向一致
    箭头函数的this不能强行修改，只能修改外层包裹它的函数的this，那么箭头函数就会跟着一起改变
    箭头函数没有自己的this，使用离他最近，包裹着它的函数的this。
      如果没有函数包裹，指向window
   */



</script>

</body>
</html>